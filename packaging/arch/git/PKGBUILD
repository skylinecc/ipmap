# Maintainer: Grant Handy <grantshandy@gmail.com>

_pkgname='ipmap'
pkgname=${_pkgname}-git
pkgver='0.1.7'
pkgrel='1'
pkgdesc="An interactive map that shows connected IP addresses"
arch=('x86_64')
url="https://skylinecc.github.io/ipmap/"
license=('GPL')
depends=('glibc' 'libpcap' 'webkit2gtk')
makedepends=('rust' 'gzip' 'git')
source=("${_pkgname}::git+https://github.com/skylinecc/ipmap.git")
md5sums=('SKIP')

build() {
  cd "$srcdir/${_pkgname}"
  cargo build --release
}

package() {
  cd "$srcdir/${_pkgname}"
  install -Dm755 target/release/$_pkgname $pkgdir/usr/local/sbin/$_pkgname
  install -g 0 -o 0 -Dm644 data/ipmap.1 $pkgdir/usr/share/man/man1/${_pkgname}.1
  gzip "${pkgdir}/usr/share/man/man1/${_pkgname}.1"
}
